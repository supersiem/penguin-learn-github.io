let custom_root = "", custom_components = [{ name: "custom_component", tag: "custom_component", url: "custom_component", version: "1.0", custom_attributes: ["data"] }]; function activate() { activateCustomComponent(), activateWeblinks(), activate_triggers(); } async function activateWeblinks() { try { document.querySelectorAll("weblink").forEach(element => { var originalLink = element.getAttribute("href"); originalLink && "" !== originalLink && (element.setAttribute("href", "javascript:goTo('" + originalLink + "')"), element.innerHTML = element.innerHTML, changeTag(element, "a")); }); } catch (error) { console.error("Error:", error); } } async function activateCustomComponent() { try { custom_components.forEach(component => { let linkTriggers3 = document.querySelectorAll(component.tag); linkTriggers3.forEach(async element => { let data = await makeRequest(custom_root + component.tag + "/" + component.url + ".html"); data = data.replaceAll("{{version}}", component.version), data = data.replaceAll("{{name}}", component.name), component.custom_attributes.forEach(attr => { data = data.replaceAll("{{" + attr + "}}", element.getAttribute(attr)); }), element.innerHTML = data, changeTag(element, "custom_component_container"), activate_triggers(), data = await makeRequest(custom_root + component.tag + "/" + component.url + ".js"), data = data.replaceAll("{{version}}", component.version), data = data.replaceAll("{{name}}", component.name), component.custom_attributes.forEach(attr => { data = data.replaceAll("{{" + attr + "}}", element.getAttribute(attr)); }), eval(data); }); }); } catch (error) { console.error("Error:", error); } } async function goTo(url) { let config_for_goto = { dynamicPage: !1, page_inputs: { has_inputs: !1, inputs: [] }, url: url }, url_as_array = url.split(" "); if (url_as_array.forEach(config => { "--dynamicPage" == config || "-dp" == config ? config_for_goto.dynamicPage = !0 : config.startsWith("--page_inputs") || config.startsWith("-pi") ? (config_for_goto.page_inputs.has_inputs = !0, config_for_goto.page_inputs.inputs.push({ name: config.split("=")[1], value: config.split("=")[2] })) : "" != config && (config_for_goto.url = config); }), config_for_goto.url) { config_for_goto.dynamicPage && (config_for_goto.url = config_for_goto.url + "/" + config_for_goto.url); let html = await makeRequest(custom_root + config_for_goto.url + ".html"); if (config_for_goto.page_inputs.has_inputs && config_for_goto.page_inputs.inputs.forEach(input => { html = html.replaceAll("{" + input.name + "}", input.value); }), checkElementExists("body") ? document.getElementById("body").innerHTML = html : document.querySelector("webpage").innerHTML = html, activate(), config_for_goto.dynamicPage) { let javascript = await makeRequest(custom_root + config_for_goto.url + ".js"); config_for_goto.page_inputs.has_inputs && config_for_goto.page_inputs.inputs.forEach(input => { javascript = javascript.replaceAll("{" + input.name + "}", input.value); }), eval(javascript); } } } function makeCustomComponent(name, tag, url, version, custom_attributes) { custom_components.push({ name: name, tag: tag, url: url, version: version, custom_attributes: custom_attributes }); } function activate_triggers() { try { let Triggers = document.querySelectorAll("trigger"); Triggers.forEach(element => { eval(element.innerHTML), element.remove(); }); } catch (error) { console.error("Error:", error); } } function checkElementExists(id) { return !!document.getElementById(id); } async function makeRequest(url) { try { var response = await fetch(url); if (response.ok) return await response.text(); throw new Error("Network response was not ok " + response.statusText); } catch (error) { return console.error("Error:", error), null; } } function isMobile() { return window.innerWidth <= 800; } function str(non_string) { return non_string.toString(); } function num(non_number) { return Number(non_number); } function changeTag(element, newTagName) { if (!element) return null; let newElement = document.createElement(newTagName); return [...element.attributes].forEach(attr => newElement.setAttribute(attr.name, attr.value)), newElement.innerHTML = element.innerHTML, element.parentNode.replaceChild(newElement, element), newElement; }